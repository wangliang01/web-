Charles常用来做这些事情：
  抓取Http和Https的请求和响应，抓包是最常用的了。
  重发网络请求，方便后端调试，复杂和特殊情况下的一件重发还是非常爽的(捕获的记录，直接repeat就可以了，如果想修改还可以修改)。
  修改网络请求参数(客户端向服务端发送的时候，可以修改后再转发出去)。
  网络请求的截获和动态修改。
  支持模拟慢速网络，主要是模仿手机上的2G/3G/4G的访问流程。
  支持本志映射和远程映射，比如你可以把线上资源映射到本地某个文件夹下，这样可以方便处理一些特殊情况下的bug和线上调试(网络的css,js等资源用的是本地代码，这些你可以本地随便修改，数据之类的都是线上的环境，方便在线调试)。
  可以抓手机端访问的资源(如果是配置HOST的环境，手机可以借用host配置进入测试环境)。

其实Charles的实现原理并不复杂，大概的实现如下：

客户端 ------->  Charles ------->  服务器

Charles相当于一个插在服务器和客户端之间的“过滤器”。

当客户端向服务器发起请求的时候，先到Charles进行过滤，然后Charles再把最终的数据发送到服务器。

注意：此时Charles发给服务器的数据，不一定是客户端请求的数据；Charles在接收到客户端的请求时可以自由地修改数据，甚至可以直接Block客户端发的请求。

服务器接收请求后的返回数据，也会先到Charles，经达Charles过滤后再发给客户端。

同理：客户端接收的数据，不一定就是服务器返回的数据，而是Charles给的数据。

正因为上面的原理，所以Charles能实现的功能，对前端开发者来说非常有吸引力，相当于请求和响应都可控的，而且Charles为了控制更加方便，提供很多简洁的操作：

如果想要抓包，第一件事情，就是把Charles设置成为本机和服务端之间的“过滤器”；让所有的网络请求全部经过Charles，这样就可以捕获并记录到你请求的内容和返回数据了，需要注意的是，如果你访问的是WEB,你可以把所有请求抓到，但如果你想抓取某些应用（如手机上的应用），应用使用的某些资源，如果没有向服务器发送请求，而是通过调用内部资源的方式进行展现，那么此时Charles是抓不到的;验证这个的方式很简单，就是把网络断掉后，如果还可以继续展现，就是属于调用内部资源的，这种时候就不要想着通过抓包工具来捕获资源了，他都没有像服务器发起请求，手机点烂也抓不到的；

1.将Charles设置为系统代理
启动 Charles 后，第一次 Charles 会询问你是否把Charles设置为系统的代理，如果此时你忽略了这个询问敞口，你可以在后期设置的；将 Charles 设置成系统代理：选择菜单中的 “Proxy” -> “Mac OS X Proxy/windows proxy” 来将 Charles 设置成系统代理


2.将charles设置为chrome的代理

需要注意的是，Chrome 和 Firefox 浏览器并不一定使用的就是本机，可能是一些代理工具，而 Charles 是通过将自己设置成代理服务器来完成资源记录的，所以如果你的charles无法截取 Chrome 和 Firefox 浏览器的网络请求内容，需要在浏览器里做下修改。在 Chrome 中设置成使用系统的代理服务器设置即可，或者直接将代理服务器设置成 127.0.0.1:8888 也可达到相同效果。

charles 主界面的介绍

Charles 主要提供两种查看封包的视图，分别名为 “Structure” 和 “Sequence”。

– Structure/结构视图，将网络请求按访问的域名分类，比如某个域名下有n个资源请求，那么所有此域名下的请求都会在这里做一个详细的分类；

– Sequence/序列视图，将网络请求按访问的时间排序，按照你的电脑的发送请求顺序进行。

当使用”序列视图”的时候

请求多了有些时候会看不过来，Charles 提供了一个简单的 Filter 功能，可以输入关键字来快速筛选出 URL 中带指定关键字的网络请求。

对于需要抓取的某个请求，通常情况下，我们需要对网络请求进行过滤，只监控向指定目录服务器上发送的请求。对于这种需求，以下几种办法：


方法一：直接过滤域名；

在主界面的中部的 Filter 栏中填入需要过滤出来的关键字。例如我查看的域名地址是：https://zhubangbang.com , 那么只需要在 Filter 栏中填入 zhubangbang.com或bang，即可过滤含有这些关键字信息的请求（只要host和path中含有即可）。

方法二：修改Include的域名和端口

在 Charles 的菜单栏选择 “Proxy”->”Recording Settings”，然后选择 Include 栏，选择添加一个项目，然后填入需要监控的协议，主机地址，端口号。这样就可以只截取目标网站的封包了;